!function(){function t(t){if(this.container=document.querySelector(t.container||"body"),!this.container)throw new Error("container is not found.");this.panels=this.container.querySelectorAll("[data-scro-panel]"),this.triggerDistance=t.triggerDistance||100,this.scrollDuration=t.scrollDuration||500,this.isMoving=!1,this.wheelDeltaY=0,document.addEventListener("wheel",this.onWheel.bind(this),{passive:!1}),document.addEventListener("touchstart",this.onTouchStart.bind(this),{passive:!1}),document.addEventListener("touchmove",this.onTouchMove.bind(this),{passive:!1}),document.addEventListener("touchend",this.onTouchEnd.bind(this),{passive:!1}),setTimeout(function(){window.scrollTo(0,0)},10),this.currentPanel=0}function e(t,e,n){this.startY=t,this.distance=e,this.duration=n}t.prototype={onWheel:function(t){t.preventDefault(),this.updateWheelEvent(t),this.isMoving||this.isInertiaWheel()||Math.abs(this.wheelDeltaY)<10||(this.isMoving=!0,this.wheelDeltaY>0?this.movePrevPanel().then(this.onFinishMove.bind(this)):this.moveNextPanel().then(this.onFinishMove.bind(this)))},updateWheelEvent:function(t){this.prevWheelDeltaY=this.wheelDeltaY,this.wheelDeltaY=t.deltaY},isInertiaWheel:function(){var t=!1;return Math.abs(this.prevWheelDeltaY)>=Math.abs(this.wheelDeltaY)&&(t=!0),t},onFinishMove:function(){this.isMoving=!1},onTouchStart:function(t){this.touchStartEvent=t},onTouchMove:function(t){if(t.preventDefault(),this.isMoving||!this.touchStartEvent)return void(this.touchStartEvent=t);var e=this.touchStartEvent.touches[0].clientY,n=t.touches[0].clientY,i=n-e;Math.abs(i)<this.triggerDistance||(this.isMoving=!0,i>0?this.movePrevPanel().then(this.onFinishMove.bind(this)):this.moveNextPanel().then(this.onFinishMove.bind(this)))},onTouchEnd:function(t){t.preventDefault(),this.touchStartEvent=null},moveNextPanel:function(){if(this.isLastPanel())return Promise.resolve();var t=this.panels[this.currentPanel+1],n=t.offsetTop;this.currentPanel=this.currentPanel+1;var i=this;return new Promise(function(t){var s=new e(window.scrollY,n-window.scrollY,i.scrollDuration);s.scroll().then(t)})},movePrevPanel:function(){if(this.isFirstPanel())return Promise.resolve();var t=this.panels[this.currentPanel-1],n=t.offsetTop;this.currentPanel=this.currentPanel-1;var i=this;return new Promise(function(t){var s=new e(window.scrollY,n-window.scrollY,i.scrollDuration);s.scroll().then(t)})},isFirstPanel:function(){return 0===this.currentPanel},isLastPanel:function(){return this.currentPanel===this.panels.length-1}},e.prototype={scroll:function(){var t=this;return new Promise(function(e){requestAnimationFrame(function(n){t.startTime=n,t.loop(n,e)})})},loop:function(t,e){var n=t-this.startTime;if(n>this.duration)return window.scrollTo(0,this.startY+this.distance),void e();var i=n/this.duration*this.distance;window.scrollTo(0,this.startY+i);var s=this;requestAnimationFrame(function(t){s.loop(t,e)})}},window.Scll=t}();
